sources:
  source0:
    type: opentelemetry
    http:
      address: 0.0.0.0:4320
    grpc:
      address: 0.0.0.0:4999
    use_otlp_decoding: true

  internal_metrics:
    type: internal_metrics
    scrape_interval_secs: 60

sinks:
  otel_sink:
    inputs:
      - source0.logs
    type: opentelemetry
    protocol:
      type: http
      uri: http://otel-collector-sink:5318/v1/logs
      method: post
      encoding:
        codec: json
      framing:
        method: newline_delimited
      batch:
        max_events: 1
      request:
        headers:
          content-type: application/json
  logs_console_sink:
    type: console
    inputs:
      - source0.logs
    encoding:
      codec: json
